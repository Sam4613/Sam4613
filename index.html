<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/ar.js/aframe/build/aframe-ar.js"></script>
  </head>
  <body>
    <a-scene embedded arjs="debugUIEnabled:false;">
      <a-entity gps-camera rotation-reader></a-entity>
      <a-box position="0 0.5 -1" material="color: red;" scale="0.5 0.5 0.5"></a-box>
      <a-entity gltf-model="url(https://cdn.aframe.io/models/animated-figures/female.glb)" scale=" 0.2 0.2" gps-entity-place="latitude: 51.5074; longitude: 0.1278;"></a-entity>
      <a-entity gltf-model="url(https://cdn.aframe.io/models/animated-figures/male.glb)" scale="0.2 0.2 0.2" gps-entity-place="latitude: 51.5074; longitude: 0.1278;"></a-entity>
      <script>
        AFRAME.registerComponent('gps-entity-place', {
          schema: {
            latitude: { type: 'number' },
            longitude: { type: 'number' }
           },
                init: function () {
        var entity = this.el;
        navigator.geolocation.getCurrentPosition(function (position) {
          entity.setAttribute('gps-projected-entity-place', {
            latitude: position.coords.latitude,
            longitude: position.coords.longitude
          });
        });
      }
    });

    AFRAME.registerComponent('gps-projected-entity-place', {
      schema: {
        latitude: { type: 'number' },
        longitude: { type: 'number' }
      },

      init: function () {
        var loader = new THREE.GLTFLoader();
        var entity = this.el;
        var position = this.data.position;
        var location = new THREE.Vector3();
        location.x = position.x;
        location.y = position.y;
        location.z = position.z;
        entity.setAttribute('position', location);
        loader.load(entity.getAttribute('gltf-model'), function (gltf) {
          var model = gltf.scene;
          model.position.set(location.x, location.y + (model.geometry.boundingBox.max.y - model.geometry.boundingBox.min.y) / 2, location.z);
          model.scale.set(entity.getAttribute('scale').x, entity.getAttribute('scale').y, entity.getAttribute('scale').z);
          entity.setObject3D('mesh', model);
        });
      },

      update: function () {
        var gpsCoords = this.data;
        var position = this.el.sceneEl.camera.position;
        var coords = { latitude: gpsCoords.latitude, longitude: gpsCoords.longitude };
        var distance = getDistance(position, coords);

        if (distance < 50) {
          var location = getPositionFromCoords(coords, position);
          this.el.setAttribute('position', location);
        }
      }
    });

    AFRAME.registerComponent('gps-camera', {
      schema: {
        minimumAltitude: { type: 'number', default: 0 }
      },

      init: function () {
        var self = this;
        var scene = this.el.sceneEl;

        scene.addEventListener('loaded', function () {
          if (navigator.geolocation) {
            navigator.geolocation.watchPosition(function (position) {
              var altitude = position.coords.altitude || 0;
var latitude = position.coords.latitude;
var longitude = position.coords.longitude;
                        // Set camera position
          var cameraEl = document.querySelector('a-camera');
          cameraEl.setAttribute('position', {x: longitude, y: altitude, z: latitude});
          
          // Set marker position
          var markerEl = document.querySelector('#marker');
          markerEl.setAttribute('gps-entity-place', {latitude: latitude, longitude: longitude});
          markerEl.setAttribute('visible', true);
        },
        function (error) {
          console.error(error);
        },
        { enableHighAccuracy: true, maximumAge: 0, timeout: 27000 });
      }
    });
  </script>
</body>
</html>
```

